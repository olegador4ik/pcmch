{% load static %}
<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="{% static 'style.css' %}?v=1.1">
</head>
<script>const savedTheme = sessionStorage.getItem('theme');if(savedTheme){document.documentElement.setAttribute('data-theme', savedTheme);}</script>
<body>
<button onclick="tgth()">Switch theme</button>
<div class="main">
  <p class="mt">Result</p>
  <svg id="svg" class="pcm" xmlns="http://www.w3.org/2000/svg">
    <line x1="0", y1="50%", x2="100%", y2="50%", class="txc", style="stroke-width:2px;"/>
    <line x1="50%", y1="0", x2="50%", y2="100%", class="txc", style="stroke-width:2px;"/>
    <polygon points="-5,10 0,0 5,10", transform="translate(250,0)" class="txc"/>
    <polygon points="-5,10 0,0 5,10", transform="translate(500,250) rotate(90)" class="txc"/>
    <polygon points="-5,10 0,0 5,10", transform="translate(250,500) rotate(180)" class="txc"/>
    <polygon points="-5,10 0,0 5,10", transform="translate(0,250) rotate(270)" class="txc"/>
    <text x="260" y="20" class="txc">T</text>
    <text x="480" y="270" class="txc">R</text>
    <text x="230" y="490" class="txc">F</text>
    <text x="10" y="240" class="txc">L</text>
    <g id="i" transform="translate(250,250)">
      <rect x="-10", y="-2.5", width="20", height="5", class="txc"/>
      <rect x="-10", y="-2.5", width="20", height="5", class="txc", transform="rotate(90)"/>
    </g>
  </svg>
  <p>Ideology that maybe can fit to you</p>
  <span id="s" class="ido"></span>
  <p>Axis "TF"(Totalitarism and Freedom) represents your views of freedom and goverment's power</p>
  <p>Axis "LR"(Left and Right) represents your views of social hierachy</p>
</div>
<span id="li"></span>
<script src="{% static 'script.js' %}?v=1.1"></script>
<script>
  const c = JSON.parse('{{ is_json|escapejs }}');
  const s = document.getElementById("s");
  console.log(c);
  let t = 0;
  let e = 0;
  t = sessionStorage.getItem("t");
  e = sessionStorage.getItem("e");
  e = -e
  if (!t || !e) {
    t = 0;
    e = 0;
  };
  const i = document.getElementById("i");
  u = (-e*15.625)+250;
  y = (t*50)+250;
  for (let a of c) {
    if (a.x < t && t <= (a.x+a.w) && a.y < e && e <= (a.y+a.h)) {
      s.textContent = (a.n);
      s.style.color = '#' + a.c;
      s.style.borderColor = '#' + a.c;
    };
  };
  i.setAttribute("transform", "translate(" + y + "," + u + ")");
</script>
</body>
