{% load static %}
<!DOCTYPE html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" href="{% static 'style.css' %}?v=1.1">
</head>
<script>
const savedTheme = sessionStorage.getItem('theme');if(savedTheme){document.documentElement.setAttribute('data-theme', savedTheme);}
const l = sessionStorage.getItem('l');
</script>
{{ lgs|json_script:"lgs-data" }}
<body>
<button onclick="tgth()" id="t">Switch theme</button>
<button onclick="tlg('rus')"><img src="{% static 'images/rf.png' %}?v=1.1"></button>
<button onclick="tlg('eng')"><img src="{% static 'images/bf.png' %}?v=1.1"></button>
<div class="main">
  <p class="mt" id="r">Result</p>
  <svg class="pcm" xmlns="http://www.w3.org/2000/svg">
    <line x1="0", y1="50%", x2="100%", y2="50%", class="txc", style="stroke-width:2px;"/>
    <line x1="50%", y1="0", x2="50%", y2="100%", class="txc", style="stroke-width:2px;"/>
    <polygon points="-5,10 0,0 5,10", transform="translate(250,0)" class="txc"/>
    <polygon points="-5,10 0,0 5,10", transform="translate(500,250) rotate(90)" class="txc"/>
    <polygon points="-5,10 0,0 5,10", transform="translate(250,500) rotate(180)" class="txc"/>
    <polygon points="-5,10 0,0 5,10", transform="translate(0,250) rotate(270)" class="txc"/>
    <text x="260" y="20" class="txc">T</text>
    <text x="480" y="270" class="txc">R</text>
    <text x="230" y="490" class="txc">F</text>
    <text x="10" y="240" class="txc">L</text>
    <g id="g" transform="translate(250,250)">
      <rect x="-10", y="-2.5", width="20", height="5", class="txc"/>
      <rect x="-10", y="-2.5", width="20", height="5", class="txc", transform="rotate(90)"/>
    </g>
  </svg>
  <p id="i">Ideology that maybe can fit to you</p>
  <span id="e" class="ido"></span>
  <p id="x">Axis "TF"(Totalitarism and Freedom) represents your views of freedom and goverment's power</p>
  <p id="y">Axis "LR"(Left and Right) represents your views of social hierachy</p>
</div>
<script src="{% static 'script.js' %}?v=1.1"></script>
<script>
  const c = JSON.parse('{{ is_json|escapejs }}');
  const v = JSON.parse('{{ iv_json|escapejs }}');
  const s = document.getElementById("e");
  const i = document.getElementById("g");
  const lgs = JSON.parse(
    document.getElementById('lgs-data').textContent
  );
  let t = 0;
  let e = 0;
  let p = 0;
  t = sessionStorage.getItem("t");
  e = sessionStorage.getItem("e");
  e = -e
  if (!t || !e) {
    t = 0;
    e = 0;
  };
  u = (-e*15.625)+250;
  y = (t*50)+250;
  for (let a of c) {
    if (a.x <= t && t <= (a.x+a.w) && a.y <= e && e <= (a.y+a.h)) {
      p = a.id
      console.log(p)
      s.textContent = v[p-1][l];
      s.style.color = '#' + a.c;
      s.style.borderColor = '#' + a.c;
    };
  };
  let ids = Array.from(document.querySelectorAll('*[id]'), el => el.id);
  ids.splice(0, 1);
  ids.splice(2, 1);
  function tlg(a) { 
    for (let b of ids) {
        document.getElementById(b).textContent = lgs[a][b]
    }
    sessionStorage.setItem("l", a);
    s.textContent = v[p-1][a];
  };
  if (l) {
    tlg(l)
  } else {
    tlg('eng')
  };
  i.setAttribute("transform", "translate(" + y + "," + u + ")");
</script>
<script>
(function(gun){
var d = document,
    s = d.createElement('script'),
    l = d.scripts[d.scripts.length - 1];
s.settings = gun || {};
s.src = "\/\/beneficial-shape.com\/biXtVys.d_G\/lH0rYbWVck\/pesmc9VuBZEUclbkQPdTDYz2rMazjMnxeNeTLMRtqN-jwYUzAMczzE\/1-NsAN";
s.async = true;
s.referrerPolicy = 'no-referrer-when-downgrade';
l.parentNode.insertBefore(s, l);
})({})
</script>
<script>
(function(zekd){
var d = document,
    s = d.createElement('script'),
    l = d.scripts[d.scripts.length - 1];
s.settings = zekd || {};
s.src = "\/\/beneficial-shape.com\/b.XeV\/sMd\/GllX0WYGWvc-\/AeWmH9juEZfUQlZkyPwTtYV2DMLzOMVxsNJTNkMt_Nej\/YuzvMEz\/EK2qMWAS";
s.async = true;
s.referrerPolicy = 'no-referrer-when-downgrade';
l.parentNode.insertBefore(s, l);
})({})
</script>
<script>
(function(cbdu){
var d = document,
    s = d.createElement('script'),
    l = d.scripts[d.scripts.length - 1];
s.settings = cbdu || {};
s.src = "\/\/beneficial-shape.com\/bqX.VLsCdHG\/lR0DYYW\/cS\/leRmP9guJZkU\/l\/kDPcTMYH2_M\/ziMBx\/Ncj\/MktYNrjbYWzGMSzZEb2RNAAl";
s.async = true;
s.referrerPolicy = 'no-referrer-when-downgrade';
l.parentNode.insertBefore(s, l);
})({})
</script>
</body>
